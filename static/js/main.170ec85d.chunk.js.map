{"version":3,"sources":["App.js","array.js","index.js"],"names":["generateItems","length","Object","toConsumableArray","Array","keys","map","k","i","key","id","concat","text","opacity","actions","reverse","_ref","arr","items","slice","shuffle","_ref2","a","Math","random","sort","b","move","oldIndex","newIndex","_ref3","removeFrom","arguments","undefined","insertAt","isNaN","Number","_arr","item","splice","disabled","state","draggingItemId","_ref4","_this","setState","onDragStart","console","log","listRef","style","touchAction","onDragOver","findIndex","setListRef","el","onFlipStart","childElement","domNode","onFlipEnd","_this2","this","_this$state","react_default","createElement","className","droppable","onDrop","App_Draggable","swap","ref","react_flip_move_es","duration","enterAnimation","onStartAll","onFinishAll","App_ListItem","Component","Draggable","onTouchMove","e","touches","_e$touches$","clientX","clientY","target","transform","draggingOverElement","document","elementFromPoint","includes","_this3","props","onTouchEnd","draggable","onTouchStart","ListItem","selected","_this4","_this$props","children","ReactDOM","render","src_App_default","getElementById"],"mappings":"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","file":"static/js/main.170ec85d.chunk.js","sourcesContent":["import React, { Component, PureComponent } from 'react';\r\nimport FlipMove from 'react-flip-move';\r\nimport './App.css';\r\nimport { move, shuffle, reverse } from './array';\r\n\r\nconst generateItems = length => [...Array(length).keys()].map((k,i) => ({\r\n  key:i,\r\n  id:`Item ${k}`,\r\n  text:`Item ${k}`,\r\n  opacity:1\r\n}));\r\n\r\nconst actions = {\r\n  reverse: ({items}) => ({items: reverse(items)}),\r\n  shuffle: ({items}) => ({items: shuffle(items)}),\r\n  move: (oldIndex, newIndex) => ({items}) => ({items: move(items, oldIndex, newIndex)}),\r\n}\r\n\r\nconst stopEvent = e => {\r\n  console.log('stoppingEvent',e.type, e.target);\r\n  // e.preventDefault();\r\n  // e.stopPropagation();\r\n}\r\nlet disabled = false;\r\n\r\nexport default class extends Component {\r\n\r\n  state = { \r\n    items: generateItems(8),\r\n    draggingItemId: '',\r\n  }\r\n  \r\n  move = ({oldIndex, newIndex}) => this.setState(actions.move(oldIndex, newIndex));\r\n  reverse = () => this.setState(actions.reverse);\r\n  shuffle = () => this.setState(actions.shuffle);\r\n  onDragStart = id => {\r\n    console.log('onDragStart', id, this.listRef.style);\r\n    this.listRef.style.touchAction='none';\r\n    this.setState({draggingItemId:id});\r\n  }\r\n  onDragOver = id => {\r\n    if (disabled) return;\r\n    const oldIndex = this.state.items.findIndex(item => item.id === this.state.draggingItemId);\r\n    const newIndex = this.state.items.findIndex(item => item.id === id);\r\n    console.log('onDragOver', id, oldIndex, newIndex);\r\n    this.setState(actions.move(oldIndex, newIndex));\r\n    // draggingItemId = id;\r\n  }\r\n  setListRef = el => {\r\n    this.listRef = el;\r\n    console.log(this.listRef);\r\n  }\r\n  onFlipStart = (childElement, domNode) => {\r\n    console.log('onFlipStart', childElement, domNode)\r\n    disabled=true;\r\n  }\r\n  onFlipEnd = (childElement, domNode) => {\r\n    console.log('onFlipEnd', childElement, domNode)\r\n    disabled=false;\r\n  }\r\n  render() {\r\n    const { items, draggingItemId } = this.state;\r\n    return (\r\n      <div className=\"App\"  droppable=\"true\"  onDragOver={this.onDragOver} onDrop={this.onDragOver} >\r\n        {/* <button onClick={this.reverse}>Reverse</button>\r\n        <button onClick={this.shuffle}>Shuffle</button> */}\r\n        <Draggable onDragStart={this.onDragStart} draggingItemId={draggingItemId} swap={this.swap} onDragOver={this.onDragOver}/>\r\n        <div className=\"list\" ref={this.setListRef}>\r\n          <FlipMove duration={200} enterAnimation=\"fade\" onStartAll={this.onFlipStart} onFinishAll={this.onFlipEnd}>\r\n            {items.map((item, i) => {\r\n              return <ListItem id={item.id} draggingItemId={draggingItemId} key={item.key} onDragStart={this.onDragStart}>{item.text}</ListItem>\r\n            })}\r\n          </FlipMove>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\n\r\nclass Draggable extends Component {\r\n  onTouchMove = e => {\r\n    console.log(\"onTouchMove\", e.touches);\r\n    const { clientX, clientY } = e.touches[0];\r\n    e.target.style.transform = `translateY(${clientY}px)`;\r\n    const draggingOverElement = document.elementFromPoint(clientX, clientY);\r\n    if (draggingOverElement.id.includes(\"Item\") && this.props.draggingItemId !== draggingOverElement.id) {\r\n      console.log(draggingOverElement);\r\n      this.props.onDragOver(draggingOverElement.id);\r\n    }\r\n  }\r\n  onTouchEnd = e => {\r\n\r\n  }\r\n  render() {\r\n    return <div \r\n        className=\"placeholder\" \r\n        draggable=\"true\" \r\n        onTouchMove={this.onTouchMove}  \r\n        onTouchStart={this.onTouchStart}\r\n        onTouchEnd={this.onTouchEnd}\r\n      />\r\n  }\r\n}\r\n\r\n// FlipMove requires class compoonents as children\r\nclass ListItem extends Component {\r\n  state = { selected: true };\r\n  onTouchStart = e => {\r\n    this.props.onDragStart(this.props.id);\r\n  }\r\n  render() {\r\n    const { children, id, draggingItemId } = this.props;\r\n    return <div \r\n      onTouchStart={this.onTouchStart}\r\n      className={id===draggingItemId ? 'blank' : 'list-item' }\r\n      id={id}\r\n    > \r\n      {children}\r\n    </div>\r\n  }\r\n}\r\n","export const move = (arr, removeFrom=null, insertAt=null) => {\r\n    /*\r\n        Adds item if removeFrom is null\r\n        Removes item if insertAt is null\r\n    */\r\n    if (insertAt === removeFrom) return arr;\r\n    if (isNaN(Number(removeFrom) || isNaN(Number(insertAt)))) return arr;\r\n\r\n    let _arr = [...arr];\r\n\r\n    const item = (removeFrom !== null) ? _arr.splice(removeFrom, 1)[0] : null; \r\n    if (insertAt !== null) {\r\n        _arr.splice(insertAt, 0, item);\r\n    }\r\n\r\n    return _arr;\r\n  };\r\n    \r\nexport const shuffle = arr => arr\r\n    .map(a => [Math.random(), a])\r\n    .sort((a, b) => a[0] - b[0])\r\n    .map(a => a[1]);\r\n\r\nexport const reverse = arr => arr.slice().reverse();","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}